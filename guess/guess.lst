       1                                        .TITLE Guess the Number!
       2        177560                          TKS = 177560
       3        177562                          TKB = 177562
       4        177564                          TPS = 177564
       5        177566                          TPB = 177566
       6        177546                          LKS = 777546
       7        002000                          STACK = 2000
       8                                
       9 000000                                 .ASECT
      10        001000                  .=1000
      11                                start:   
      12 001000 012706  002000                  MOV     #STACK, SP 
      13 001004 012700  000002'                 MOV     #HELLO, R0
      14 001010 004767  001230'                 CALL    PRINT
      15 001014 004767  001176'                 CALL    GETC
      16 001020 042703  177400                  BIC     #177400, R3
      17 001024 010337  000000'                 MOV     R3, @#RND
      18 001030 012700  000220'         LOOP:   MOV     #PROMPT, R0
      19 001034 004767  001230'                 CALL    PRINT
      20                                       
      21 001040 004767  001116'                 CALL    RDNUM
      22 001044 023700  000000'                 CMP     @#RND, R0
      23 001050 001415                          BEQ     1$
      24 001052 002406                          BLT     0$
      25 001054 012700  000260'                 MOV     #HIGHER, R0
      26 001060 004767  001230'                 CALL    PRINT
      27 001064 000167  001030'                 JMP     LOOP
      28 001070 012700  000274'         0$:     MOV     #LOWER, R0
      29 001074 004767  001230'                 CALL    PRINT
      30 001100 000167  001030'                 JMP     LOOP
      31 001104 012700  000223'         1$:     MOV     #WELLD, R0
      32 001110 004767  001230'                 CALL    PRINT
      33 001114 000000                          HALT
      34                                
      35                                ; read a decimal number from TTI
      36                                ; returns: number in r0
      37 001116 005001                  RDNUM:  CLR     R1 
      38 001120 004767  001176'         NXTDIG: CALL    GETC
      39 001124 022700  000015                  CMP     #15, R0
      40 001130 001414                          BEQ     0$
      41 001132 004767  001214'                 CALL    PUTC
      42 001136 162700  000060                  SUB     #60,R0
      43 001142 006301                          ASL     R1
      44 001144 010102                          MOV     R1,R2
      45 001146 006301                          ASL     R1
      46 001150 006301                          ASL     R1
      47 001152 060201                          ADD     R2,R1
      48 001154 060001                          ADD     R0,R1
      49 001156 000167  001120'                 JMP     NXTDIG
      50 001162 012700  000307'         0$:     MOV     #NEWLINE, R0
      51 001166 004767  001230'                 CALL    PRINT
      52 001172 010100                          MOV     R1,R0 
      53 001174 000207                          RTS     PC
      54                                
      55                                ; read a char from TTI 
      56                                ; returns: char in R0 
      57                                ; side-effect: increment R3 while waiting to generate "random" number
      58                                GETC:   
      59 001176 005203                  0$:     INC     R3 
      60 001200 105737  177560                  TSTB    @#TKS
      61 001204 100374                          BPL     0$
      62 001206 113700  177562                  MOVB    @#TKB, R0
      63 001212 000207                          RTS     PC
      64                                
      65                                ; put a char to TTO
      66                                ; R0: the char
      67 001214 010037  177566          PUTC:   MOV     R0, @#TPB
      68 001220 105737  177564          1$:     TSTB    @#TPS
      69 001224 100375                          BPL     1$
      70 001226 000207                          RTS     PC        
      71                                
      72                                ; print a NULL terminated string to TTO
      73                                ; R0: Address of String
      74 001230 112037  177566          PRINT:  MOVB    (R0)+, @#TPB
      75 001234 001405                          BEQ     0$
      76 001236 105737  177564          1$:     TSTB    @#TPS
      77 001242 100375                          BPL     1$
      78 001244 000167  001230'                 JMP     PRINT
      79 001250 000207                  0$:     RTS     PC
      80                                
      81 000000                                 .PSECT  DATA, REL, RW
      82 000000 000000                  RND:    .WORD   0
      83 000002    075     075     075  HELLO:  .ASCIZ  /=============================================/<15><12>/| Guess the Number (0-255) - PDP11 Edition. |/<15><12>/=============================================/<15><12>/
         000005    075     075     075  
         000010    075     075     075  
         000013    075     075     075  
         000016    075     075     075  
         000021    075     075     075  
         000024    075     075     075  
         000027    075     075     075  
         000032    075     075     075  
         000035    075     075     075  
         000040    075     075     075  
         000043    075     075     075  
         000046    075     075     075  
         000051    075     075     075  
         000054    075     075     075  
         000057    015     012     174  
         000062    040     107     165  
         000065    145     163     163  
         000070    040     164     150  
         000073    145     040     116  
         000076    165     155     142  
         000101    145     162     040  
         000104    050     060     055  
         000107    062     065     065  
         000112    051     040     055  
         000115    040     120     104  
         000120    120     061     061  
         000123    040     105     144  
         000126    151     164     151  
         000131    157     156     056  
         000134    040     174     015  
         000137    012     075     075  
         000142    075     075     075  
         000145    075     075     075  
         000150    075     075     075  
         000153    075     075     075  
         000156    075     075     075  
         000161    075     075     075  
         000164    075     075     075  
         000167    075     075     075  
         000172    075     075     075  
         000175    075     075     075  
         000200    075     075     075  
         000203    075     075     075  
         000206    075     075     075  
         000211    075     075     075  
         000214    075     015     012  
         000217    000                  
      84 000220    076     040     000  PROMPT: .ASCIZ  /> /
      85 000223    131     157     165  WELLD:  .ASCIZ  /You guessed it! Well done!/<15><12>/
         000226    040     147     165  
         000231    145     163     163  
         000234    145     144     040  
         000237    151     164     041  
         000242    040     127     145  
         000245    154     154     040  
         000250    144     157     156  
         000253    145     041     015  
         000256    012     000          
      86 000260    110     151     147  HIGHER: .ASCIZ  /Higher.../<15><12>/
         000263    150     145     162  
         000266    056     056     056  
         000271    015     012     000  
      87 000274    114     157     167  LOWER:  .ASCIZ  /Lower.../<15><12>/
         000277    145     162     056  
         000302    056     056     015  
         000305    012     000          
      88 000307    015     012     000  NEWLINE:.ASCIZ  //<15><12>/
      88                                


Symbol table

.      ******R      002 1$3   =001220   L       LOOP  =001030           PUTC  =001214           TKS   =177560           
0$0   =001070   L       1$4   =001236   L       LOWER  000274R      002 RDNUM =001116           TPB   =177566           
0$1   =001162   L       GETC  =001176           NEWLIN 000307R      002 RND    000000R      002 TPS   =177564           
0$2   =001176   L       HELLO  000002R      002 NXTDIG=001120           STACK =002000           WELLD  000223R      002 
0$4   =001250   L       HIGHER 000260R      002 PRINT =001230           START =001000           
1$0   =001104   L       LKS   =177546           PROMPT 000220R      002 TKB   =177562           


Program sections:

. ABS.  001252    000   (RW,I,GBL,ABS,OVR,NOSAV)
        000000    001   (RW,I,LCL,REL,CON,NOSAV)
DATA    000312    002   (RW,I,LCL,REL,CON,NOSAV)
